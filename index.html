<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>比特币投资策略回测分析 | BTC Strategy Backtest</title>
    <meta name="description" content="基于2013-2025年真实数据的比特币投资策略回测工具，对比多种投资策略收益表现">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- 头部 -->
        <header class="header">
            <div class="header-content">
                <h1 class="title">
                    <span class="title-icon">₿</span>
                    比特币投资策略回测分析
                </h1>
                <p class="subtitle">基于 2013-2025 年真实数据 · 多策略对比 · 科学投资决策</p>
            </div>
        </header>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <!-- 参数设置区 -->
            <section class="card settings-card">
                <h2 class="card-title">
                    <span class="icon">⚙️</span>
                    投资参数设置
                </h2>
                <div class="settings-grid">
                    <div class="setting-group">
                        <label for="initialInvestment">初始投资金额 (USD)</label>
                        <input type="number" id="initialInvestment" value="10000" min="100" step="100">
                    </div>
                    <div class="setting-group">
                        <label for="startDate">开始日期</label>
                        <input type="date" id="startDate" value="2020-01-01">
                    </div>
                    <div class="setting-group">
                        <label for="endDate">结束日期</label>
                        <input type="date" id="endDate" value="2025-12-04">
                    </div>
                    <div class="setting-group">
                        <label for="dcaAmount">定投金额 (USD/月)</label>
                        <input type="number" id="dcaAmount" value="500" min="0" step="50">
                    </div>
                </div>
            </section>

            <!-- 预设策略选择 -->
            <section class="card strategies-card">
                <h2 class="card-title">
                    <span class="icon">📊</span>
                    预设投资策略
                </h2>
                <div class="strategies-grid">
                    <div class="strategy-option">
                        <input type="checkbox" id="strategy-hodl" checked>
                        <label for="strategy-hodl">
                            <div class="strategy-name">HODL 持有策略</div>
                            <div class="strategy-desc">一次性买入并长期持有</div>
                        </label>
                    </div>
                    <div class="strategy-option">
                        <input type="checkbox" id="strategy-dca" checked>
                        <label for="strategy-dca">
                            <div class="strategy-name">定投策略 (DCA)</div>
                            <div class="strategy-desc">每月固定金额买入</div>
                        </label>
                    </div>
                    <div class="strategy-option">
                        <input type="checkbox" id="strategy-sell-high" checked>
                        <label for="strategy-sell-high">
                            <div class="strategy-name">高抛策略</div>
                            <div class="strategy-desc">涨幅达30%时卖出50%</div>
                        </label>
                    </div>
                    <div class="strategy-option">
                        <input type="checkbox" id="strategy-buy-dip" checked>
                        <label for="strategy-buy-dip">
                            <div class="strategy-name">低吸策略</div>
                            <div class="strategy-desc">跌幅超20%时买入</div>
                        </label>
                    </div>
                    <div class="strategy-option">
                        <input type="checkbox" id="strategy-grid" checked>
                        <label for="strategy-grid">
                            <div class="strategy-name">网格交易</div>
                            <div class="strategy-desc">涨10%卖出，跌10%买入</div>
                        </label>
                    </div>
                    <div class="strategy-option">
                        <input type="checkbox" id="strategy-ma-cross" checked>
                        <label for="strategy-ma-cross">
                            <div class="strategy-name">均线交叉</div>
                            <div class="strategy-desc">30日均线金叉/死叉策略</div>
                        </label>
                    </div>
                </div>
            </section>

            <!-- 自定义收益目标 -->
            <section class="card custom-card">
                <h2 class="card-title">
                    <span class="icon">🎯</span>
                    自定义收益目标
                </h2>
                <div class="custom-settings">
                    <div class="setting-group">
                        <label for="targetYears">投资年限</label>
                        <input type="range" id="targetYears" min="1" max="10" value="5" step="1">
                        <span class="range-value" id="targetYearsValue">5 年</span>
                    </div>
                    <div class="setting-group">
                        <label for="targetReturn">目标年化收益率</label>
                        <input type="range" id="targetReturn" min="10" max="100" value="30" step="5">
                        <span class="range-value" id="targetReturnValue">30%</span>
                    </div>
                    <div class="setting-group">
                        <button id="analyzeCustom" class="btn-analyze">分析可行性</button>
                    </div>
                </div>
            </section>

            <!-- 计算按钮 -->
            <div class="action-section">
                <button id="calculateBtn" class="btn-primary">
                    <span class="btn-icon">🚀</span>
                    开始回测分析
                </button>
            </div>

            <!-- 加载状态 -->
            <div id="loadingIndicator" class="loading-indicator" style="display: none;">
                <div class="spinner"></div>
                <p>正在分析数据...</p>
            </div>

            <!-- 结果展示区 -->
            <div id="resultsSection" style="display: none;">
                <!-- 总览卡片 -->
                <section class="card results-overview">
                    <h2 class="card-title">
                        <span class="icon">📈</span>
                        策略收益对比
                    </h2>
                    <div id="resultsGrid" class="results-grid"></div>
                </section>

                <!-- 图表展示 -->
                <section class="card chart-card">
                    <h2 class="card-title">
                        <span class="icon">📊</span>
                        资产增长曲线
                    </h2>
                    <div class="chart-container">
                        <canvas id="portfolioChart"></canvas>
                    </div>
                    <div class="chart-legend">
                        <p><strong>图表说明：</strong></p>
                        <p>🔺 绿色三角 = 买入点 &nbsp; | &nbsp; 🔶 红色菱形 = 卖出点</p>
                        <p>点击策略名称可查看详细交易历史，了解每笔交易的具体时间、价格和原因</p>
                    </div>
                </section>

                <!-- 价格走势图 -->
                <section class="card chart-card">
                    <h2 class="card-title">
                        <span class="icon">💹</span>
                        BTC 价格走势
                    </h2>
                    <div class="chart-container">
                        <canvas id="priceChart"></canvas>
                    </div>
                </section>

                <!-- 自定义策略分析结果 -->
                <section class="card custom-results-card" id="customResults" style="display: none;">
                    <h2 class="card-title">
                        <span class="icon">🎯</span>
                        自定义收益目标分析
                    </h2>
                    <div id="customAnalysisContent"></div>
                </section>
            </div>
        </main>

        <!-- 页脚 -->
        <footer class="footer">
            <p>数据来源：BTC Price 2015-2025.csv | 仅供参考，不构成投资建议</p>
            <p>Historical data analysis · Past performance does not guarantee future results</p>
        </footer>
    </div>

    <script src="strategies.js"></script>
    <script src="app.js"></script>
</body>
</html>
